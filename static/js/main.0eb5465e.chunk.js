(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],[,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var i,n,a=r(1),o=r.n(a),s=r(7),c=r.n(s),l=(r(13),r(14),r(5)),u=r(4),d=(r(15),r(0)),h=o.a.memo((function(e){return Object(d.jsx)("button",{className:"newGame",onClick:e.onClick,children:e.label})})),f=(r(17),o.a.memo((function(e){var t=e.letter;return Object(d.jsx)("div",{className:"byte",children:t})}))),g=r(2),v=r(3),b=["about","above","abuse","actor","acute","admit","adopt","adult","after","again","agent","agree","ahead","alarm","album","alert","alike","alive","allow","alone","along","alter","among","anger","Angle","angry","apart","apple","apply","arena","argue","arise","array","aside","asset","audio","audit","avoid","award","aware","badly","baker","bases","basic","basis","beach","began","begin","begun","being","below","bench","billy","birth","black","blame","blind","block","blood","board","boost","booth","bound","brain","brand","bread","break","breed","brief","bring","broad","broke","brown","build","built","buyer","cable","calif","carry","catch","cause","chain","chair","chart","chase","cheap","check","chest","chief","child","china","chose","civil","claim","class","clean","clear","click","clock","close","coach","coast","could","count","court","cover","craft","crash","cream","crime","cross","crowd","crown","curve","cycle","daily","dance","dated","dealt","death","debut","delay","depth","doing","doubt","dozen","draft","drama","drawn","dream","dress","drill","drink","drive","drove","dying","eager","early","earth","eight","elite","empty","enemy","enjoy","enter","entry","equal","error","event","every","exact","exist","extra","faith","false","fault","fiber","field","fifth","fifty","fight","final","first","fixed","flash","fleet","floor","fluid","focus","force","forth","forty","forum","found","frame","frank","fraud","fresh","front","fruit","fully","funny","giant","given","glass","globe","going","grace","grade","grand","grant","grass","great","green","gross","group","grown","guard","guess","guest","guide","happy","harry","heart","heavy","hence","henry","horse","hotel","house","human","ideal","image","index","inner","input","issue","japan","jimmy","joint","jones","judge","known","label","large","laser","later","laugh","layer","learn","lease","least","leave","legal","level","lewis","light","limit","links","lives","local","logic","loose","lower","lucky","lunch","lying","magic","major","maker","march","maria","match","maybe","mayor","meant","media","metal","might","minor","minus","mixed","model","money","month","moral","motor","mount","mouse","mouth","movie","music","needs","never","newly","night","noise","north","noted","novel","nurse","occur","ocean","offer","often","order","other","ought","paint","panel","paper","party","peace","peter","phase","phone","photo","piece","pilot","pitch","place","plain","plane","plant","plate","point","pound","power","press","price","pride","prime","print","prior","prize","proof","proud","prove","queen","quick","quiet","quite","radio","raise","range","rapid","ratio","reach","ready","refer","right","rival","river","robin","roger","roman","rough","round","route","royal","rural","scale","scene","scope","score","sense","serve","seven","shall","shape","share","sharp","sheet","shelf","shell","shift","shirt","shock","shoot","short","shown","sight","since","sixth","sixty","sized","skill","sleep","slide","small","smart","smile","smith","smoke","solid","solve","sorry","sound","south","space","spare","speak","speed","spend","spent","split","spoke","sport","staff","stage","stake","stand","start","state","steam","steel","stick","still","stock","stone","stood","store","storm","story","strip","stuck","study","stuff","style","sugar","suite","super","sweet","table","taken","taste","taxes","teach","teeth","terry","texas","thank","theft","their","theme","there","these","thick","thing","think","third","those","three","threw","throw","tight","times","tired","title","today","topic","total","touch","tough","tower","track","trade","train","treat","trend","trial","tried","tries","truck","truly","trust","truth","twice","under","undue","union","unity","until","upper","upset","urban","usage","usual","valid","value","video","virus","visit","vital","voice","waste","watch","water","wheel","where","which","while","white","whole","whose","woman","women","world","worry","worse","worst","worth","would","wound","write","wrong","wrote","yield","young","youth"],w=function(){function e(t,r){Object(v.a)(this,e),this.byteList=[],this.index=0,alert("this should be called only once"),this.byteList=this.shuffle(t),this.index=r||0}return Object(g.a)(e,[{key:"shuffle",value:function(e){for(var t,r=e.length;0!==r;){t=Math.floor(Math.random()*r),r--;var i=[e[t],e[r]];e[r]=i[0],e[t]=i[1]}return e}},{key:"getNextWord",value:function(){var e=this.byteList[this.index];return this.index=(this.index+1)%this.byteList.length,e}}]),e}(),p=function(){function e(t){Object(v.a)(this,e),this.snakeEnds=void 0,this.snakeEnds=t||{tail:{row:5,col:5},head:{row:5,col:10}}}return Object(g.a)(e,[{key:"getSnakeEnds",value:function(){return this.snakeEnds}},{key:"setSnakeEnds",value:function(e){this.snakeEnds=e}},{key:"snakeAlive",value:function(){return!0}},{key:"snakeLength",value:function(){return 4}}]),e}();!function(e){e[e.None=0]="None",e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Right=3]="Right",e[e.Left=4]="Left"}(i||(i={})),function(e){e[e.Canvas=0]="Canvas",e[e.Body=1]="Body",e[e.Head=2]="Head",e[e.Tail=3]="Tail",e[e.Byte=4]="Byte"}(n||(n={}));var y=Object(g.a)((function e(){Object(v.a)(this,e),this.role=n.Canvas,this.direction=i.None,this.pivot=i.None,this.letter=""})),m=function(){function e(){Object(v.a)(this,e),this.grid=void 0,this.gridSize=void 0,this.snake=void 0,this.bytes=void 0,this.currentBytes="snake",this.letterIndex=0;var t=document.querySelector(":root"),r=getComputedStyle(t);this.gridSize=parseInt(r.getPropertyValue("--gridSize")),this.bytes=new w(b),this.grid=new Array(this.gridSize);for(var i=0;i<this.gridSize;i++)this.grid[i]=new Array(this.gridSize);for(var n=0;n<this.gridSize;n++)for(var a=0;a<this.gridSize;a++)this.grid[n][a]=new y;this.snake=new p}return Object(g.a)(e,[{key:"getGrid",value:function(){return this.grid}},{key:"getGridSize",value:function(){return this.gridSize}},{key:"getSnake",value:function(){return this.snake}},{key:"getCurrentHeadDirection",value:function(){var e=this.snake.getSnakeEnds().head;return this.grid[e.row][e.col].direction}},{key:"getCurrentTailDirection",value:function(){var e=this.snake.getSnakeEnds().tail;return this.grid[e.row][e.col].direction}},{key:"setCurrentHeadDirection",value:function(e){var t=this.snake.getSnakeEnds().head;this.grid[t.row][t.col].direction=e}},{key:"getPivotDirectionOnCurrentTail",value:function(){var e=this.snake.getSnakeEnds().tail;return this.grid[e.row][e.col].pivot}},{key:"setCurrentTailDirection",value:function(e){var t=this.snake.getSnakeEnds().tail;this.grid[t.row][t.col].direction=e}},{key:"setPivotOnCurrentHeadDirection",value:function(e){var t=this.snake.getSnakeEnds().head;this.grid[t.row][t.col].pivot=e}},{key:"initGridData",value:function(){var e=this.snake.getSnakeEnds(),t=e.tail,r=e.head;if(this.grid[t.row][t.col].direction=i.None,this.grid[r.row][r.col].direction=i.None,this.grid[t.row][t.col].role=n.Tail,this.grid[r.row][r.col].role=n.Head,t.row===r.row)for(var a=t.col+1;a<r.col;a++)this.grid[t.row][a].role=n.Body,this.grid[r.row][a].role=n.Body;else{if(t.col!==r.col)throw new Error("Snake init invalid");for(var o=t.row+1;o<r.row;o++)this.grid[o][t.col].role=n.Body,this.grid[o][t.col].role=n.Body}this.setRandomBytePositions()}},{key:"setRandomBytePositions",value:function(){this.currentBytes=this.bytes.getNextWord();for(var e=0;e<this.currentBytes.length;e++)for(;;){var t=Math.floor(Math.random()*this.gridSize),r=Math.floor(Math.random()*this.gridSize);if(this.grid[t][r].role===n.Canvas){this.grid[t][r].role=n.Byte,this.grid[t][r].letter=this.currentBytes.charAt(e).toUpperCase();break}console.log("Invalid random position")}}},{key:"getExpectedLetter",value:function(){var e=this.currentBytes.charAt(this.letterIndex);return this.letterIndex=(this.letterIndex+1)%this.currentBytes.length,0===this.letterIndex&&this.setRandomBytePositions(),e}}]),e}(),k=(r(18),o.a.memo((function(e){var t=e.role,r=e.letter,a=e.currentHeadDirection,o=e.currentTailDirection,s=e.currentTailPivot,c=function(e){switch(e){case i.Down:return"t2b";case i.Up:return"b2t";case i.Left:return"r2l";case i.Right:return"l2r";case i.None:return"none";default:throw new Error("invalid dir")}},l=function(){switch(t){case n.Canvas:return"box";case n.Head:return"head_".concat(c(a));case n.Body:return"snake";case n.Tail:return"tail_".concat(c(s!==i.None?s:o));case n.Byte:return"food";default:throw new Error("invalid role")}}();return"food"===l?Object(d.jsx)("div",{className:l,children:Object(d.jsx)(f,{letter:r})}):Object(d.jsx)("div",{className:l})}))),j=(r(19),function(e){var t=e.grid,r=e.currentHeadDirection,i=e.currentTailDirection,n=e.currentTailPivot;return Object(d.jsx)("div",{className:"grid",children:t.flat().map((function(e,t){return Object(d.jsx)(k,{role:e.role,letter:e.letter,id:t,currentHeadDirection:r,currentTailDirection:i,currentTailPivot:n},t)}))})}),O=r(8),x=(r(20),function(e){switch(e){case n.Body:return"b ";case n.Head:return"h ";case n.Tail:return"t ";case n.Canvas:return"c ";case n.Byte:return"f ";default:throw new Error("invalid role")}}),D=function(e){switch(e){case i.Down:return"d ";case i.Up:return"u ";case i.Left:return"l ";case i.Right:return"r ";case i.None:return"n ";default:throw new Error("invalid direction")}},C=function(e){var t=e.role,r=e.direction,i=e.pivot;return Object(d.jsxs)("div",{className:"debugBox",children:[t>0?x(t):null,r>0?D(r):null,t>0?D(i).toUpperCase():null]})},S=(r(21),function(e){var t=e.grid;return Object(d.jsx)("div",{className:"debugGrid",children:t.flat().map((function(e,t){return Object(d.jsx)(C,{role:e.role,letter:e.letter,direction:e.direction,pivot:e.pivot},t)}))})}),N=(r(22),r(23),function(){return Object(d.jsx)("div",{className:"wordTilesContainer",children:"SNAKE"})}),E=document.querySelector(":root"),H=getComputedStyle(E).getPropertyValue("--tick"),B=1e3*parseFloat(H.substr(0,H.length-1)),T=new URL(window.location.href),L=new URLSearchParams(T.search),P=new m;P.initGridData();var R=P.getGridSize(),U=P.getGrid(),z=function(){var e=Object(a.useState)(P.getSnake().getSnakeEnds()),t=Object(u.a)(e,2),r=t[0],o=t[1],s=Object(a.useState)(!1),c=Object(u.a)(s,2),f=c[0],g=c[1],v=Object(a.useState)(!1),b=Object(u.a)(v,2),w=b[0],p=b[1],y=function(e){if(!function(e){var t=r.head.row,i=r.head.col;return U[t][i].role===n.Byte}()){var t=r.tail.row,a=r.tail.col,o=U[t][a].pivot,s=o!==i.None?o:P.getCurrentTailDirection();U[t][a].role=n.Canvas,U[t][a].direction=i.None,o!==i.None&&(U[t][a].pivot=i.None);var c=t,l=a;switch(s){case i.Up:c=r.tail.row-1<0?R-1:r.tail.row-1;break;case i.Down:c=r.tail.row+1>=R?0:r.tail.row+1;break;case i.Right:l=r.tail.col+1>=R?0:r.tail.col+1;break;case i.Left:l=r.tail.col-1<0?R-1:r.tail.col-1;break;default:throw g(!1),new Error("Invalid tail direction!")}e.tail.row=c,e.tail.col=l,U[c][l].role=n.Tail,U[c][l].direction=s}},m=function(e){return y(e),function(e){var t=r.head.row,a=r.head.col,o=P.getCurrentHeadDirection();U[t][a].role=n.Body,U[t][a].direction=i.None;var s=t,c=a;switch(o){case i.Up:s=r.head.row-1<0?R-1:r.head.row-1;break;case i.Down:s=r.head.row+1>=R?0:r.head.row+1;break;case i.Right:c=r.head.col+1>=R?0:r.head.col+1;break;case i.Left:c=r.head.col-1<0?R-1:r.head.col-1;break;default:throw g(!1),new Error("Invalid head direction!")}switch(e.head.row=s,e.head.col=c,U[s][c].role){case n.Canvas:U[s][c].role=n.Head;break;case n.Byte:console.log("Byte found!");var l=P.getExpectedLetter().toUpperCase(),u=U[s][c].letter;if(u!==l)throw new Error("Wrong letter, expected = ".concat(l,", letter = ").concat(u));break;default:throw g(!1),new Error("Head collision with invalid role")}U[s][c].direction=o}(e),e};!function(e,t){var r=Object(a.useRef)(e);Object(a.useLayoutEffect)((function(){r.current=e}),[e]),Object(a.useEffect)((function(){if(t){var e=setInterval((function(){return r.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){var e=Object(l.a)({},r),t=m(e);o(t),P.getSnake().setSnakeEnds(e)}),f?B:null);var k=Object(a.useCallback)((function(){if(!f){var e=P.getCurrentTailDirection();P.getCurrentHeadDirection()===i.None&&e===i.None&&(P.setCurrentTailDirection(i.Right),P.setCurrentHeadDirection(i.Right))}g((function(e){return!e}))}),[f]),x=Object(a.useCallback)((function(){p((function(e){return!e}))}),[]),D=Object(O.useSwipeable)({onSwipedLeft:function(){if(f){var e=P.getCurrentHeadDirection();e!==i.Left&&e!==i.Right&&(P.setCurrentHeadDirection(i.Left),P.setPivotOnCurrentHeadDirection(i.Left))}},onSwipedRight:function(){if(f){var e=P.getCurrentHeadDirection();e!==i.Left&&e!==i.Right&&(P.setCurrentHeadDirection(i.Right),P.setPivotOnCurrentHeadDirection(i.Right))}},onSwipedDown:function(){if(f){var e=P.getCurrentHeadDirection();e!==i.Down&&e!==i.Up&&(P.setCurrentHeadDirection(i.Down),P.setPivotOnCurrentHeadDirection(i.Down))}},onSwipedUp:function(){if(f){var e=P.getCurrentHeadDirection();e!==i.Down&&e!==i.Up&&(P.setCurrentHeadDirection(i.Up),P.setPivotOnCurrentHeadDirection(i.Up))}},preventDefaultTouchmoveEvent:!0,trackMouse:!0});return Object(d.jsxs)("div",Object(l.a)(Object(l.a)({},D),{},{className:"game",children:[Object(d.jsx)("div",{className:"gridContainer",children:w?Object(d.jsx)(S,{grid:U}):Object(d.jsx)(j,{grid:U,currentHeadDirection:P.getCurrentHeadDirection(),currentTailDirection:P.getCurrentTailDirection(),currentTailPivot:P.getPivotDirectionOnCurrentTail()})}),Object(d.jsxs)("div",{className:"appUtils",children:[Object(d.jsx)(h,{onClick:k,label:f?"Pause":"Play"}),"true"===L.get("debug")?Object(d.jsx)(h,{onClick:x,label:w?"Debug Off":"Debug On"}):null]}),Object(d.jsx)(N,{})]}))},I=(r(24),o.a.memo((function(){return Object(d.jsx)("div",{className:"title",children:"Snake Bytes"})}))),A=(r(25),function(){return Object(d.jsxs)("div",{className:"header",children:[Object(d.jsxs)("div",{className:"menuleft",children:[Object(d.jsx)("button",{className:"About",style:{margin:"2px"},children:"About"}),Object(d.jsx)("button",{className:"Instructions",style:{margin:"2px"},children:"How"})]}),Object(d.jsx)(I,{}),Object(d.jsxs)("div",{className:"menuright",children:[Object(d.jsx)("button",{className:"Sett",style:{margin:"2px"},children:"Settings"}),Object(d.jsx)("button",{className:"Stat",style:{margin:"2px"},children:"Stats"})]})]})}),G=function(){return Object(d.jsxs)("div",{className:"appContainer",children:[Object(d.jsx)(A,{}),Object(d.jsx)(z,{})]})};c.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(G,{})}),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.0eb5465e.chunk.js.map