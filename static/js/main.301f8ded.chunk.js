(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{59:function(e,t,r){},60:function(e,t,r){},61:function(e,t,r){},63:function(e,t,r){},64:function(e,t,r){},65:function(e,t,r){},66:function(e,t,r){},67:function(e,t,r){},68:function(e,t,r){},69:function(e,t,r){},70:function(e,t,r){},71:function(e,t,r){},72:function(e,t,r){},73:function(e,t,r){},78:function(e,t,r){"use strict";r.r(t);var n,i,a=r(0),o=r.n(a),c=r(45),s=r.n(c),l=(r(59),r(6)),u=(r(60),r(35)),d=(r(61),r(1)),h=o.a.memo((function(e){return Object(d.jsx)("button",{className:"newGame",onClick:e.onClick,children:e.label})})),f=(r(63),o.a.memo((function(e){var t=e.letter;return Object(d.jsx)("div",{className:"byte",children:t})}))),v=r(22),g=r(23),b=["about","above","actor","acute","admit","adopt","adult","after","again","agent","ahead","album","alive","allow","apart","apple","arena","array","audio","audit","avoid","award","aware","bases","basic","beach","begun","bench","billy","birth","black","blind","block","booth","bound","brand","breed","bring","brown","build","built","buyer","cable","calif","carry","catch","chair","chart","check","child","civil","claim","class","clear","click","clock","coach","count","court","cover","craft","cross","crowd","crown","curve","daily","dated","delay","depth","doubt","draft","drawn","dress","drill","drink","eight","elite","empty","enemy","enjoy","entry","error","event","exact","extra","faith","fault","fifth","fifty","fight","final","fixed","flash","fleet","floor","fluid","focus","force","forty","forum","frame","frank","fraud","fresh","front","fruit","fully","funny","given","going","grace","grand","grant","grass","gross","group","guard","guess","guide","happy","harry","heavy","hence","henry","house","human","image","input","issue","japan","jimmy","joint","jones","judge","known","label","laugh","leave","legal","level","light","limit","local","logic","loose","lucky","lunch","lying","magic","major","maker","maria","match","metal","might","minor","mixed","model","money","month","motor","mouth","movie","music","newly","novel","occur","often","paper","party","peace","peter","phone","photo","piece","pilot","pitch","place","plain","plant","pound","power","press","price","prime","print","prior","prize","proof","proud","queen","quick","rapid","ratio","reach","river","robin","rough","round","royal","rural","shell","shift","shirt","shown","sight","since","sixth","sized","smith","sorry","spend","spent","stand","stock","stuff","style","taken","taxes","teeth","thank","theft","their","theme","thick","think","third","threw","tight","title","total","track","train","trend","truck","truly","truth","twice","undue","union","unity","upper","valid","value","video","virus","visit","vital","voice","watch","water","wheel","which","while","whole","woman","women","world","worry","would","wound","write","young","youth"],j=function(){function e(t,r){Object(g.a)(this,e),this.byteList=[],this.index=0,console.log("this should be called only once"),this.byteList=this.shuffle(t),this.index=r||0}return Object(v.a)(e,[{key:"shuffle",value:function(e){for(var t,r=e.length;0!==r;){t=Math.floor(Math.random()*r),r--;var n=[e[t],e[r]];e[r]=n[0],e[t]=n[1]}return e}},{key:"getNextWord",value:function(){var e=this.byteList[this.index];return this.index=(this.index+1)%this.byteList.length,e}}]),e}(),w=function(){function e(t){Object(g.a)(this,e),this.snakeEnds=void 0,this.snakeEnds=t||{tail:{row:5,col:5},head:{row:5,col:10}}}return Object(v.a)(e,[{key:"getSnakeEnds",value:function(){return this.snakeEnds}},{key:"setSnakeEnds",value:function(e){this.snakeEnds=e}},{key:"snakeAlive",value:function(){return!0}},{key:"snakeLength",value:function(){return 4}}]),e}();!function(e){e[e.None=0]="None",e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Right=3]="Right",e[e.Left=4]="Left"}(n||(n={})),function(e){e[e.Canvas=0]="Canvas",e[e.Body=1]="Body",e[e.Head=2]="Head",e[e.Tail=3]="Tail",e[e.Byte=4]="Byte",e[e.FirstHead=5]="FirstHead",e[e.FirstTail=6]="FirstTail"}(i||(i={}));var m=Object(v.a)((function e(){Object(g.a)(this,e),this.role=i.Canvas,this.direction=n.None,this.pivot=n.None,this.letter=""})),y=function(){function e(){Object(g.a)(this,e),this.grid=void 0,this.gridSize=void 0,this.snake=void 0,this.bytes=void 0,this.currentBytes="snake",this.letterIndex=0;var t=document.querySelector(":root"),r=getComputedStyle(t);this.gridSize=parseInt(r.getPropertyValue("--gridSize")),this.bytes=new j(b),this.grid=new Array(this.gridSize);for(var n=0;n<this.gridSize;n++)this.grid[n]=new Array(this.gridSize);for(var i=0;i<this.gridSize;i++)for(var a=0;a<this.gridSize;a++)this.grid[i][a]=new m;this.snake=new w}return Object(v.a)(e,[{key:"getGrid",value:function(){return this.grid}},{key:"getGridSize",value:function(){return this.gridSize}},{key:"getSnake",value:function(){return this.snake}},{key:"getCurrentHeadDirection",value:function(){var e=this.snake.getSnakeEnds().head;return this.grid[e.row][e.col].direction}},{key:"getCurrentTailDirection",value:function(){var e=this.snake.getSnakeEnds().tail;return this.grid[e.row][e.col].direction}},{key:"setCurrentHeadDirection",value:function(e){var t=this.snake.getSnakeEnds().head;this.grid[t.row][t.col].direction=e}},{key:"getPivotDirectionOnCurrentTail",value:function(){var e=this.snake.getSnakeEnds().tail;return this.grid[e.row][e.col].pivot}},{key:"setCurrentTailDirection",value:function(e){var t=this.snake.getSnakeEnds().tail;this.grid[t.row][t.col].direction=e}},{key:"setPivotOnCurrentHeadDirection",value:function(e){var t=this.snake.getSnakeEnds().head;this.grid[t.row][t.col].pivot=e}},{key:"initGridData",value:function(){var e=this.snake.getSnakeEnds(),t=e.tail,r=e.head;if(this.grid[t.row][t.col].direction=n.None,this.grid[r.row][r.col].direction=n.None,this.grid[t.row][t.col].role=i.FirstTail,this.grid[r.row][r.col].role=i.FirstHead,t.row===r.row)for(var a=t.col+1;a<r.col;a++)this.grid[t.row][a].role=i.Body,this.grid[r.row][a].role=i.Body;else{if(t.col!==r.col)throw new Error("Snake init invalid");for(var o=t.row+1;o<r.row;o++)this.grid[o][t.col].role=i.Body,this.grid[o][t.col].role=i.Body}this.setRandomBytePositions()}},{key:"setRandomBytePositions",value:function(){this.currentBytes=this.bytes.getNextWord();for(var e=0;e<this.currentBytes.length;e++)for(;;){var t=Math.floor(Math.random()*this.gridSize),r=Math.floor(Math.random()*this.gridSize);if(this.grid[t][r].role===i.Canvas){this.grid[t][r].role=i.Byte,this.grid[t][r].letter=this.currentBytes.charAt(e).toUpperCase();break}console.log("Invalid random position")}}},{key:"getLetterIndex",value:function(){return this.letterIndex}},{key:"incrementLetterIndex",value:function(){this.letterIndex=(this.letterIndex+1)%this.currentBytes.length}},{key:"getExpectedLetter",value:function(){return this.currentBytes.charAt(this.letterIndex)}}]),e}(),p=(r(64),o.a.memo((function(e){var t=e.role,r=e.letter,a=e.currentHeadDirection,o=e.currentTailDirection,c=e.currentTailPivot,s=function(e){switch(e){case n.Down:return"t2b";case n.Up:return"b2t";case n.Left:return"r2l";case n.Right:return"l2r";case n.None:return"none";default:throw new Error("invalid dir")}},l=function(){switch(t){case i.FirstTail:case i.Canvas:return"box";case i.Head:return"head_".concat(s(a));case i.FirstHead:return"head_none";case i.Body:return"snake";case i.Tail:return"tail_".concat(s(c!==n.None?c:o));case i.Byte:return"food";default:throw new Error("invalid role")}}();return"food"===l?Object(d.jsx)("div",{className:l,children:Object(d.jsx)(f,{letter:r})}):Object(d.jsx)("div",{className:l})}))),k=(r(65),function(e){var t=e.grid,r=e.currentHeadDirection,n=e.currentTailDirection,i=e.currentTailPivot;return Object(d.jsx)("div",{className:"grid",children:t.flat().map((function(e,t){return Object(d.jsx)(p,{role:e.role,letter:e.letter,id:t,currentHeadDirection:r,currentTailDirection:n,currentTailPivot:i},t)}))})}),O=r(49),x=(r(66),function(e){switch(e){case i.Body:return"b ";case i.Head:return"h ";case i.Tail:return"t ";case i.Canvas:return"c ";case i.Byte:return"f ";default:throw new Error("invalid role")}}),C=function(e){switch(e){case n.Down:return"d ";case n.Up:return"u ";case n.Left:return"l ";case n.Right:return"r ";case n.None:return"n ";default:throw new Error("invalid direction")}},D=function(e){var t=e.role,r=e.direction,n=e.pivot;return Object(d.jsxs)("div",{className:"debugBox",children:[t>0?x(t):null,r>0?C(r):null,t>0?C(n).toUpperCase():null]})},S=(r(67),function(e){var t=e.grid;return Object(d.jsx)("div",{className:"debugGrid",children:t.flat().map((function(e,t){return Object(d.jsx)(D,{role:e.role,letter:e.letter,direction:e.direction,pivot:e.pivot},t)}))})}),N=(r(68),r(14)),H=(r(69),r(70),o.a.memo((function(e){return Object(d.jsx)("div",{className:"wordTilesContainer",children:Object(N.a)(e.bytes).map((function(e,t){return Object(d.jsx)("div",{className:"tile",children:e},t)}))})}))),E=(r(71),r.p+"static/media/snakeSmile.c4c253be.gif"),I=o.a.memo((function(e){var t=e.action,r=e.onCloseInstructions;return Object(d.jsxs)("div",{className:t?"instructionsModalContainerIn":"instructionsModalContainerOut",children:[Object(d.jsx)("h2",{className:"textInstructions",children:"How to play"}),Object(d.jsx)("h4",{className:"textInstructions",children:"Swipe up, down, left, right to move the snake"}),Object(d.jsx)("h4",{className:"textInstructions",children:"Consume the letters to form a five letter word"}),Object(d.jsx)("img",{src:E,alt:"funny snake GIF"}),Object(d.jsx)("button",{className:"playButton",onClick:r,children:"Play"})]})})),B=document.querySelector(":root"),T=getComputedStyle(B).getPropertyValue("--tick"),L=1e3*parseFloat(T.substr(0,T.length-1)),z=new URL(window.location.href),P=new URLSearchParams(z.search),R=new y;R.initGridData();var U=R.getGridSize(),M=R.getGrid(),F=function(e){var t=e.showInstructions,r=e.onCloseInstructions,o=Object(a.useState)(R.getSnake().getSnakeEnds()),c=Object(l.a)(o,2),s=c[0],f=c[1],v=Object(a.useState)(!1),g=Object(l.a)(v,2),b=g[0],j=g[1],w=Object(a.useState)(!1),m=Object(l.a)(w,2),y=m[0],p=m[1],x=Object(a.useState)(""),C=Object(l.a)(x,2),D=C[0],N=C[1],E=function(e){if(!function(e){var t=s.head.row,r=s.head.col;return M[t][r].role===i.Byte}()){var t=s.tail.row,r=s.tail.col,a=M[t][r].pivot,o=a!==n.None?a:R.getCurrentTailDirection();M[t][r].role=i.Canvas,M[t][r].direction=n.None,a!==n.None&&(M[t][r].pivot=n.None);var c=t,l=r;switch(o){case n.Up:c=s.tail.row-1<0?U-1:s.tail.row-1;break;case n.Down:c=s.tail.row+1>=U?0:s.tail.row+1;break;case n.Right:l=s.tail.col+1>=U?0:s.tail.col+1;break;case n.Left:l=s.tail.col-1<0?U-1:s.tail.col-1;break;default:j(!1);var u="Invalid tail direction!";throw alert(u),new Error(u)}e.tail.row=c,e.tail.col=l,M[c][l].role=i.Tail,M[c][l].direction=o}},B=function(e){return E(e),function(e){var t=s.head.row,r=s.head.col,a=R.getCurrentHeadDirection();M[t][r].role=i.Body,M[t][r].direction=n.None;var o=t,c=r;switch(a){case n.Up:o=s.head.row-1<0?U-1:s.head.row-1;break;case n.Down:o=s.head.row+1>=U?0:s.head.row+1;break;case n.Right:c=s.head.col+1>=U?0:s.head.col+1;break;case n.Left:c=s.head.col-1<0?U-1:s.head.col-1;break;default:j(!1);var l="Invalid head direction!";throw alert(l),new Error(l)}switch(e.head.row=o,e.head.col=c,M[o][c].role){case i.Tail:case i.Canvas:M[o][c].role=i.Head;break;case i.Byte:var u=R.getExpectedLetter().toUpperCase(),d=M[o][c].letter;if(d!==u){var h="Wrong letter, expected = ".concat(u,", letter = ").concat(d);throw alert(h),new Error(h)}var f=R.getLetterIndex()>0?D+d:d;N(f),R.incrementLetterIndex(),0===R.getLetterIndex()&&R.setRandomBytePositions();break;default:j(!1);var v="Head collision with invalid role";throw alert(v),new Error(v)}M[o][c].direction=a}(e),e};!function(e,t){var r=Object(a.useRef)(e);Object(a.useLayoutEffect)((function(){r.current=e}),[e]),Object(a.useEffect)((function(){if(t){var e=setInterval((function(){return r.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){var e=Object(u.a)({},s),t=B(e);f(t),R.getSnake().setSnakeEnds(e)}),b?L:null),Object(a.useEffect)((function(){t&&j(!1)}),[t]);var T=Object(a.useCallback)((function(){if(t)j(!1);else{if(!b){var e=R.getCurrentTailDirection();R.getCurrentHeadDirection()===n.None&&e===n.None&&(R.setCurrentTailDirection(n.Right),R.setCurrentHeadDirection(n.Right))}j((function(e){return!e}))}}),[b,t]),z=Object(a.useCallback)((function(){p((function(e){return!e}))}),[]),F=Object(O.useSwipeable)({onSwipedLeft:function(){if(b){var e=R.getCurrentHeadDirection();e!==n.Left&&e!==n.Right&&(R.setCurrentHeadDirection(n.Left),R.setPivotOnCurrentHeadDirection(n.Left))}else T()},onSwipedRight:function(){if(b){var e=R.getCurrentHeadDirection();e!==n.Left&&e!==n.Right&&(R.setCurrentHeadDirection(n.Right),R.setPivotOnCurrentHeadDirection(n.Right))}else T()},onSwipedDown:function(){if(b){var e=R.getCurrentHeadDirection();e!==n.Down&&e!==n.Up&&(R.setCurrentHeadDirection(n.Down),R.setPivotOnCurrentHeadDirection(n.Down))}else T()},onSwipedUp:function(){if(b){var e=R.getCurrentHeadDirection();e!==n.Down&&e!==n.Up&&(R.setCurrentHeadDirection(n.Up),R.setPivotOnCurrentHeadDirection(n.Up))}else T()},preventDefaultTouchmoveEvent:!0,trackMouse:!0});return Object(d.jsxs)("div",Object(u.a)(Object(u.a)({},F),{},{className:"game",children:[Object(d.jsx)(I,{action:t,onCloseInstructions:r}),Object(d.jsx)("div",{className:"gridContainer",children:y?Object(d.jsx)(S,{grid:M}):Object(d.jsx)(k,{grid:M,currentHeadDirection:R.getCurrentHeadDirection(),currentTailDirection:R.getCurrentTailDirection(),currentTailPivot:R.getPivotDirectionOnCurrentTail()})}),Object(d.jsx)("div",{className:"appUtils",children:"true"===P.get("debug")?Object(d.jsx)(h,{onClick:z,label:y?"Debug Off":"Debug On"}):null}),Object(d.jsx)(H,{bytes:D})]}))},G=(r(72),o.a.memo((function(){return Object(d.jsx)("div",{className:"title",children:"Snake Bytes"})}))),q=(r(73),r(100)),A=r(50),V=r(102),W=r(96),_=r(97),J=r(98),K=r(99),Q=document.querySelector(":root"),X=getComputedStyle(Q).getPropertyValue("--fontColor"),Y=Object(A.a)({palette:{primary:{main:X.trim()}}}),Z=function(e){return Object(d.jsx)(V.a,{theme:Y,children:Object(d.jsxs)("div",{className:"header",children:[Object(d.jsxs)("div",{className:"menuleft",children:[Object(d.jsx)(q.a,{"aria-label":"Menu",color:"primary",size:"small",children:Object(d.jsx)(W.a,{})}),Object(d.jsx)(q.a,{"aria-label":"Instruction",color:"primary",size:"small",onClick:e.onClickInstructions,children:Object(d.jsx)(_.a,{})})]}),Object(d.jsx)(G,{}),Object(d.jsxs)("div",{className:"menuright",children:[Object(d.jsx)(q.a,{"aria-label":"Stats",color:"primary",size:"small",children:Object(d.jsx)(J.a,{})}),Object(d.jsx)(q.a,{"aria-label":"Settings",color:"primary",size:"small",children:Object(d.jsx)(K.a,{})})]})]})})},$=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),r=t[0],n=t[1];return Object(d.jsxs)("div",{className:"appContainer",children:[Object(d.jsx)(Z,{onClickInstructions:function(){n(!0)}}),Object(d.jsx)(F,{showInstructions:r,onCloseInstructions:function(){n(!1)}})]})};s.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)($,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.301f8ded.chunk.js.map