{"version":3,"sources":["gridContainer.tsx","title.tsx","score.tsx","button.tsx","box.tsx","gridRenderer.tsx","useInterval.tsx","App.tsx","index.tsx"],"names":["Direction","Title","console","log","Score","React","memo","props","currentScore","Button","className","onClick","label","Box","GridRenderer","grid","getClassName","box","flat","map","index","id","root","document","querySelector","rootStyle","getComputedStyle","gridSize","parseInt","getPropertyValue","snakeEndsInit","tail","row","col","head","Array","from","fill","currentHeadDir","Down","currentTailDir","GridContainer","useState","snakeEnds","setSnakeEnds","playing","setPlaying","callback","delay","savedCallback","useRef","useLayoutEffect","current","useEffect","setInterval","clearInterval","useInterval","ends","newCol","newRow","Up","Right","Left","Error","getNewEnds","handleOnNewGame","useCallback","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.428905c4.chunk.js","sourcesContent":["import React, { useCallback, useState } from \"react\";\nimport { Score } from \"./score\";\nimport { Button } from \"./button\";\nimport { useInterval } from \"./useInterval\";\nimport { GridRenderer } from \"./gridRenderer\";\n\nconst root = document.querySelector(\":root\")!;\nconst rootStyle = getComputedStyle(root);\nlet gridSize = parseInt(rootStyle.getPropertyValue(\"--gridSize\"));\nconst snakeEndsInit = { tail: { row: 5, col: 5 }, head: { row: 8, col: 5 } };\n\n// init the grid\nlet grid: string[][] = Array.from(Array(gridSize), () =>\n  new Array(gridSize).fill(\"b\")\n);\ngrid[5][5] = \"t\";\ngrid[6][5] = grid[7][5] = \"s\";\ngrid[8][5] = \"h\";\n\n// decare the directions\nenum Direction {\n  Up = 1,\n  Down,\n  Right,\n  Left,\n}\n\nlet currentHeadDir = Direction.Down;\nlet currentTailDir = Direction.Down;\n\nexport const GridContainer: React.FunctionComponent = () => {\n  const [snakeEnds, setSnakeEnds] = useState(snakeEndsInit);\n  const [playing, setPlaying] = useState(false);\n  //   const [currentHeadDir, setCurrentHeadDir] = useState(Direction.Down);\n  //   const [currentTailDir, setCurrentTailDir] = useState(Direction.Down);\n\n  const getNewEnds = (ends: typeof snakeEnds) => {\n    let newCol = snakeEnds.head.col;\n    let newRow = snakeEnds.head.row;\n    grid[newRow][newCol] = \"s\"; // make current head -> snake\n\n    switch (currentHeadDir) {\n      case Direction.Up: {\n        newRow =\n          snakeEnds.head.row - 1 < 0 ? gridSize - 1 : snakeEnds.head.row - 1;\n        break;\n      }\n      case Direction.Down: {\n        newRow =\n          snakeEnds.head.row + 1 >= gridSize ? 0 : snakeEnds.head.row + 1;\n        break;\n      }\n      case Direction.Right: {\n        newCol =\n          snakeEnds.head.col + 1 >= gridSize ? 0 : snakeEnds.head.col + 1;\n        break;\n      }\n      case Direction.Left: {\n        newCol =\n          snakeEnds.head.col - 1 < 0 ? gridSize - 1 : snakeEnds.head.col - 1;\n        break;\n      }\n      default:\n        throw new Error(\"Invalid head direction!\");\n    }\n    ends.head.row = newRow;\n    ends.head.col = newCol;\n\n    grid[newRow][newCol] = \"h\"; // b -> h\n    grid[snakeEnds.tail.row][snakeEnds.tail.col] = \"b\"; // t -> b\n\n    newCol = snakeEnds.tail.col;\n    newRow = snakeEnds.tail.row;\n\n    switch (currentTailDir) {\n      case Direction.Up: {\n        newRow =\n          snakeEnds.tail.row - 1 < 0 ? gridSize - 1 : snakeEnds.tail.row - 1;\n        break;\n      }\n      case Direction.Down: {\n        newRow =\n          snakeEnds.tail.row + 1 >= gridSize ? 0 : snakeEnds.tail.row + 1;\n        break;\n      }\n      case Direction.Right: {\n        newCol =\n          snakeEnds.tail.col + 1 >= gridSize ? 0 : snakeEnds.tail.col + 1;\n        break;\n      }\n      case Direction.Left: {\n        newCol =\n          snakeEnds.tail.col - 1 < 0 ? gridSize - 1 : snakeEnds.tail.col - 1;\n        break;\n      }\n      default:\n        throw new Error(\"Invalid tail direction!\");\n    }\n\n    ends.tail.row = newRow;\n    ends.tail.col = newCol;\n    grid[newRow][newCol] = \"t\"; // s -> t\n\n    return ends;\n  };\n\n  const onTick = () => {\n    let ends = { ...snakeEnds };\n    // console.log(\"head = \", ends.head, \"tail = \", ends.tail);\n    setSnakeEnds(getNewEnds(ends));\n  };\n\n  useInterval(\n    onTick,\n    // Delay in milliseconds or null to stop it\n    playing ? 600 : null\n  );\n\n  const handleOnNewGame = useCallback(() => {\n    setPlaying((playing) => !playing);\n  }, []);\n\n  return (\n    <div>\n      <GridRenderer grid={grid} />\n      <div className={\"appUtils\"}>\n        <Score currentScore={0}></Score>\n        <Button\n          onClick={handleOnNewGame}\n          label={playing ? \"Stop Game\" : \"New Game\"}\n        />\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\n\nexport const Title:React.FunctionComponent = () => {\n    console.log(\"Title rendering\");\n    return <h2>SNAKE</h2>;\n}","import React from 'react';\n\ninterface IScoreProps{\n    currentScore:number;\n}\nexport const Score: React.FunctionComponent<IScoreProps> = React.memo((props) => {\n    console.log(\"Score rendering: \" ,props.currentScore);\n    return <h2>Score: {props.currentScore}</h2>\n});","import React from 'react';\nimport './style/button.css';\n\ninterface IButtonProps{\n    onClick: () => void;\n    label: string;\n}\n\nexport const Button:React.FunctionComponent<IButtonProps> = React.memo((props) => {\n    console.log(\"Button rendering\");\n    return <button className={'newGame'} onClick={props.onClick} >{props.label}</button>;\n});","import React from \"react\";\nimport \"./style/box.css\";\n\ninterface IBoxProps {\n  id?: number;\n  className: string;\n}\n\nexport const Box: React.FunctionComponent<IBoxProps> = React.memo((props) => {\n  // console.log(\"Box rendering props: \", props.className);\n  return <div className={props.className}></div>;\n});\n","import React from \"react\";\nimport { Box } from \"./box\";\nimport \"./style/grid.css\";\n\ninterface IGripRendererProps {\n  grid: string[][];\n}\n\nexport const GridRenderer: React.FunctionComponent<IGripRendererProps> = (\n  props\n) => {\n  const { grid } = props;\n\n  const getClassName = (box: string): string => {\n    switch (box) {\n      case \"b\":\n        return \"box\";\n      case \"h\":\n        return \"head\";\n      case \"s\":\n        return \"snake\";\n      case \"t\":\n        return \"tail\";\n      case \"f\":\n        return \"food\";\n    }\n    return \"invalid\";\n  };\n\n  return (\n    <div className={\"grid\"}>\n      {grid.flat().map((box, index) => (\n        <Box className={getClassName(box)} id={index} key={index} />\n      ))}\n    </div>\n  );\n};\n","import { useEffect, useLayoutEffect, useRef } from \"react\"\n\nexport const useInterval = (callback: () => void, delay: number | null) => {\n    const savedCallback = useRef(callback)\n  \n    // Remember the latest callback if it changes.\n    useLayoutEffect(() => {\n      savedCallback.current = callback\n    }, [callback])\n  \n    // Set up the interval.\n    useEffect(() => {\n      // Don't schedule if no delay is specified.\n      if (!delay) {\n        return\n      }\n  \n      const id = setInterval(() => savedCallback.current(), delay)\n  \n      return () => clearInterval(id)\n    }, [delay])\n  }","import React from \"react\";\nimport \"./style/App.css\";\n\nimport { Title } from \"./title\";\nimport { GridContainer } from \"./gridContainer\";\n\nexport const App: React.FunctionComponent = () => {\n  return (\n    <div className={\"appContainer\"}>\n      <Title />\n      <GridContainer />\n    </div>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style/index.css';\nimport {App} from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}